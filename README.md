# Fast Pytest Runner for VS Code

## ğŸš€ ç®€ä»‹

**Fast Pytest Runner** æ˜¯ä¸€æ¬¾ä¸“ä¸º VS Code è®¾è®¡çš„æ’ä»¶ï¼Œæ—¨åœ¨ä¼˜åŒ– `Python Test Explorer for Visual Studio Code` çš„ä¸€äº›ä¸è¶³ä¹‹å¤„ã€‚è¯¥æ’ä»¶æ”¯æŒæ›´å¿«çš„æµ‹è¯•æ‰«æã€æ›´çµæ´»çš„è°ƒè¯•é…ç½®ï¼Œå¹¶æ˜¾è‘—æå‡æµ‹è¯•è¿è¡Œé€Ÿåº¦ï¼Œè§£å†³äº† **æµ‹è¯•å‘ç°å¤±è´¥ã€è¿è¡Œç¼“æ…¢ã€æ— æ³•è½»æ¾è°ƒè¯•** ç­‰é—®é¢˜ã€‚

## ğŸ¯ ä¸»è¦åŠŸèƒ½

- ğŸ” **å¿«é€Ÿæµ‹è¯•å‘ç°**ï¼šé¿å… `Python Test Explorer` è¿‡äºç¼“æ…¢çš„æ–‡ä»¶æ‰«æ
- â–¶ **ä¸€é”®è¿è¡Œæµ‹è¯•**ï¼šæä¾› `Run Test` å’Œ `Run Test Class` æŒ‰é’®
- ğŸ **æ”¯æŒæµ‹è¯•è°ƒè¯•**ï¼šæä¾› `Debug Test` å’Œ `Debug Test Class`ï¼Œæ–¹ä¾¿æ–­ç‚¹è°ƒè¯•
- âš¡ **é«˜æ•ˆæµ‹è¯•æ‰§è¡Œ**ï¼šä¼˜åŒ– pytest è¿è¡Œæ–¹å¼ï¼Œæå‡æ‰§è¡Œé€Ÿåº¦
- ğŸ› **å¯è‡ªå®šä¹‰é…ç½®**ï¼šæ”¯æŒ `pytestRunner.alluredir` ï¼ŒpytestRunner.args ç­‰å‚æ•°ï¼Œé€‚é…ä¸åŒéœ€æ±‚

âš ï¸ ï¼šè¯¥æ‰©å±•é€‚ç”¨äºvscode 1.80.0æˆ–ä¹‹åçš„ç‰ˆæœ¬ï¼Œåªèƒ½åœ¨**Linux**ä¸Šè¿è¡Œï¼Œå¦‚éœ€åœ¨windowsä¸Šè¿è¡Œï¼Œä¿®æ”¹ä»£ç å³å¯

![å¾®ä¿¡æˆªå›¾_20250207203531](./images/title.png)

## ğŸ“¦ å®‰è£…

1. åœ¨ VS Code **æ‰©å±•å•†åº—** æœç´¢ [fast-pytest-runner](https://marketplace.visualstudio.com/items?itemName=jiyegui.fast-pytest-runner)  å¹¶å®‰è£…

2. ä¸‹è½½å·²æ‰“åŒ…å¥½çš„vsixæ–‡ä»¶è¿›è¡Œå®‰è£…

   ![image-20250207205649234](./images/11.png)

3. æˆ–è€…ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å®‰è£…æ’ä»¶ï¼š

```js
code --install-extension /xxx/your.vsix(ä½ æœ¬åœ°çš„æ’ä»¶è·¯å¾„)
```

## ğŸ› ï¸ é…ç½®

ä½ å¯ä»¥åœ¨ VS Code **è®¾ç½® (`settings.json`)** ä¸­è‡ªå®šä¹‰æ’ä»¶è¡Œä¸ºï¼Œä¾‹å¦‚ï¼š

```json
{
    "pytestRunner.pytestArgs": "-v --setup-show", // pytestå‘½ä»¤è¡Œå‚æ•°
    "pytestRunner.allureDir": "report_v3",
    "pytestRunner.pythonCmd": "sudo python3.7", // è¯»å–è¿è¡Œæ—¶å¯¹äºpythonçš„è®¾å®šï¼Œä¾‹å¦‚python3.8ï¼Œpython3.7ï¼Œpythonï¼Œsudo python3
}
```

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### **1ï¸âƒ£ è¿è¡Œå•ä¸ªæµ‹è¯•**

åœ¨ `test_*.py` æ–‡ä»¶çš„æµ‹è¯•å‡½æ•°ä¸Šæ–¹ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆ **Run Test / Debug Test** æŒ‰é’®ã€‚

- **Run Test**ï¼šç‚¹å‡»åç«‹å³æ‰§è¡Œ `pytest`
- **Debug Test**ï¼šç‚¹å‡»ååœ¨ VS Code å†…éƒ¨å¯åŠ¨è°ƒè¯•å™¨

### **2ï¸âƒ£ è¿è¡Œæ•´ä¸ªæµ‹è¯•ç±»**

å¯¹äº `class TestXxx` å½¢å¼çš„æµ‹è¯•ç±»ï¼Œä¹Ÿä¼šç”Ÿæˆ **Run Test Class / Debug Test Class** æŒ‰é’®ã€‚

- **Run Test Class**ï¼šè¿è¡Œè¯¥ç±»å†…æ‰€æœ‰æµ‹è¯•
- **Debug Test Class**ï¼šè°ƒè¯•è¯¥ç±»çš„æ‰€æœ‰æµ‹è¯•

### **3ï¸âƒ£ ç»ˆç«¯å‘½ä»¤è¡Œæ‰‹åŠ¨æ‰§è¡Œ**

å¦‚æœä½ æƒ³æ‰‹åŠ¨æ‰§è¡Œæµ‹è¯•ï¼Œå¯ä»¥åœ¨ VS Code ç»ˆç«¯è¿è¡Œï¼š

```sh
pytest -v test_example.py::test_case_name
```

## ğŸ’¡ å¸¸è§é—®é¢˜

### 1. **æ’ä»¶æœªç”Ÿæ•ˆï¼Ÿ**

ç¡®ä¿ä½ å·²ç»åœ¨ VS Code å†… **å¯ç”¨äº† Python æ‰©å±•** å¹¶æ­£ç¡®å®‰è£…äº† `pytest`ã€‚

### 2. **æ— æ³•æ‰¾åˆ°æµ‹è¯•ï¼Ÿ**

ç¡®ä¿ä½ çš„æµ‹è¯•æ–‡ä»¶åæ˜¯ `test_*.py`ï¼Œå¹¶ä¸”æµ‹è¯•å‡½æ•°ä»¥ `def test_` å¼€å¤´ã€‚

### 3. **å¦‚ä½•æé«˜æµ‹è¯•è¿è¡Œé€Ÿåº¦ï¼Ÿ**

å¯ä»¥å°è¯•ï¼š

- ç¦ç”¨ pytest è‡ªåŠ¨å‘ç°ï¼š

  ```json
  {
      "python.testing.pytestEnabled": false
  }
  ```

- é…ç½® pytest åªæ‰«ææŒ‡å®šç›®å½•ï¼š

  ```sh
  pytest --tb=short --disable-warnings
  ```

## ğŸ‰ è´¡çŒ® & åé¦ˆ

å¦‚æœä½ æœ‰æ›´å¥½çš„æƒ³æ³•æˆ–å‘ç°äº†é—®é¢˜ï¼Œæ¬¢è¿æäº¤ Issue æˆ– PRï¼

